{
  "areas": [
    {
      "UPG1": {
        "comment": "Problems that give you points towards UPG1. These are almost all worth 1 point and they have a special rule that they are halved if they are completed after the deadline. What you should also know is that you need to solve at least one exercise each week. Make sure to keep it up!"
      }
    },
    {
      "LAB1": {
        "comment": "Lab assignments (Lab 1-4) and Sessions. Each problem from a session gives 3 points each, but only the 2 best individual and 1 best group give points. If your best sessions have 5 solved, then you have 45 points!"
      }
    }
  ],

  "includes": [
    "rules/aaps_UPG1_2017.json",
    "rules/aaps_LAB1_labs.json"
  ],

  "rules": [

    {
      "towards": "individual-session-two-completed",
      "points": 1,
      "needs": {
        ">=": {
          "rhs": 2,
          "lhs": {
            "COUNT": [
              {
                ">": {
                  "rhs": 0,
                  "lhs": {"get": "individual-session-1"}
                }
              },
              {
                ">": {
                  "rhs": 0,
                  "lhs": {"get": "individual-session-2"}
                }
              },
              {
                ">": {
                  "rhs": 0,
                  "lhs": {"get": "individual-session-3"}
                }
              },
              {
                ">": {
                  "rhs": 0,
                  "lhs": {"get": "individual-session-4"}
                }
              }
            ]
          }
        }
      }
    },

    {
      "points": 1,
      "towards": "group-session-one-completed",
      "needs": {
        ">=": {
          "rhs": 1,
          "lhs": {
            "COUNT": [
              {
                ">": {
                  "rhs": 0,
                  "lhs": {"get": "group-session-1"}
                }
              },
              {
                ">": {
                  "rhs": 0,
                  "lhs": {"get": "group-session-2"}
                }
              }
            ]
          }
        }
      }
    },

    {
      "points": {
        "MAX": [
          {"+": [{"get": "individual-session-1"}, {"get": "individual-session-2"}]},
          {"+": [{"get": "individual-session-1"}, {"get": "individual-session-3"}]},
          {"+": [{"get": "individual-session-1"}, {"get": "individual-session-4"}]},
          {"+": [{"get": "individual-session-2"}, {"get": "individual-session-3"}]},
          {"+": [{"get": "individual-session-2"}, {"get": "individual-session-4"}]},
          {"+": [{"get": "individual-session-3"}, {"get": "individual-session-4"}]}
        ]
      },
      "towards": "individual-session-score"
    },

    {
      "points": {
        "MAX": [
          {"get": "group-session-1"},
          {"get": "group-session-2"}
        ]
      },
      "towards": "group-session-score"
    },

    {
      "points": {
        "+": [
          {"get": "individual-session-score"},
          {"get": "group-session-score"},
          {"get": "LAB1-points"}
        ]
      },
      "towards": "LAB1-total-points"
    },

    {
      "points": 3,
      "needs": {
        "AND": [
          {">=": {"lhs": {"get": "LAB1-total-points"}, "rhs": 27}},
          {">": {"lhs": {"get": "individual-session-two-completed"}, "rhs": 0}},
          {">": {"lhs": {"get": "group-session-one-completed"}, "rhs": 0}}
        ]
      },
      "towards": "LAB1"
    },
    {
      "points": 1,
      "needs": {
        "AND": [
          {">=": {"lhs": {"get": "LAB1-total-points"}, "rhs": 45}},
          {">": {"lhs": {"get": "individual-session-two-completed"}, "rhs": 0}},
          {">": {"lhs": {"get": "group-session-one-completed"}, "rhs": 0}}
        ]
      },
      "towards": "LAB1"
    },
    {
      "points": 1,
      "needs": {
        "AND": [
          {">=": {"lhs": {"get": "LAB1-total-points"}, "rhs": 63}},
          {">": {"lhs": {"get": "individual-session-two-completed"}, "rhs": 0}},
          {">": {"lhs": {"get": "group-session-one-completed"}, "rhs": 0}}
        ]
      },
      "towards": "LAB1"
    },

    {
      "points": 1,
      "needs": {
        "AND": [
          {">": {"lhs": {"get": "week1-solved"}, "rhs": 0}},
          {">": {"lhs": {"get": "week2-solved"}, "rhs": 0}},
          {">": {"lhs": {"get": "week3-solved"}, "rhs": 0}},
          {">": {"lhs": {"get": "week4-solved"}, "rhs": 0}},
          {">": {"lhs": {"get": "week5-solved"}, "rhs": 0}},
          {">": {"lhs": {"get": "week6-solved"}, "rhs": 0}},
          {">": {"lhs": {"get": "week7-solved"}, "rhs": 0}},
          {">": {"lhs": {"get": "week8-solved"}, "rhs": 0}},
          {">": {"lhs": {"get": "week9-solved"}, "rhs": 0}},
          {">": {"lhs": {"get": "week10-solved"}, "rhs": 0}},
          {">": {"lhs": {"get": "week11-solved"}, "rhs": 0}},
          {">": {"lhs": {"get": "week12-solved"}, "rhs": 0}},
          {">": {"lhs": {"get": "week13-solved"}, "rhs": 0}},
          {">": {"lhs": {"get": "week14-solved"}, "rhs": 0}}
        ]
      },
      "towards": "one-each-week"
    },

    {
      "points": 3,
      "needs": {
        "AND": [
          {">": {"lhs": {"get": "one-each-week"}, "rhs": 0}},
          {">=": {
             "lhs": { "get": "UPG1-points" },
             "rhs": 14
           }
          }
        ]
      },
      "towards": "UPG1"
    },
    {
      "points": 1,
      "needs": {
        "AND": [
          {">": {"lhs": { "get": "one-each-week"}, "rhs": 0 }},
          {">=": {"lhs": { "get": "UPG1-points" }, "rhs": 28}}
        ]
      },
      "towards": "UPG1"
    },
    {
      "points": 1,
      "needs": {
        "AND": [
          {
            ">": {
              "lhs": {"get": "one-each-week"},
              "rhs": 0
            }
          },
          {
            ">=": {
             "lhs": { "get": "UPG1-points" },
             "rhs": 42
            }
          },
          {
            ">=": {
              "lhs": { "get": "UPG1-hard" },
              "rhs": 7
            }
          }
        ]
      },
      "towards": "UPG1"
    }
  ]
}
